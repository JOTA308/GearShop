<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cadastro - GearShop</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg,#3498db,#2ecc71);
      min-height: 100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      margin:0;
    }
    .container {
      background:#fff;
      width:100%;
      max-width:420px;
      padding:36px;
      border-radius:12px;
      box-shadow:0 8px 30px rgba(0,0,0,0.18);
    }
    .logo { display:flex; align-items:center; gap:10px; justify-content:center; margin-bottom:18px; }
    .logo img { width:36px; }
    h2 { text-align:center; margin-bottom:6px; color:#222; }
    p.lead { text-align:center; color:#666; font-size:14px; margin-bottom:18px; }
    label { font-size:13px; color:#333; display:block; margin-bottom:6px; font-weight:600; }
    input[type="text"], input[type="password"], input[type="date"], input[type="email"] {
      width:100%;
      padding:10px 12px;
      border:1px solid #d5dbe0;
      border-radius:8px;
      margin-bottom:14px;
      font-size:14px;
    }
    input:focus { outline:none; border-color:#3498db; box-shadow:0 0 6px rgba(52,152,219,0.18); }
    .password-info { font-size:13px; color:#555; background:#fbfbfb; padding:10px 12px; border-radius:8px; border-left:3px solid #2ecc71; margin-bottom:16px; }
    .btn { width:100%; padding:12px; background:#3498db; color:#fff; border:none; font-weight:700; border-radius:8px; cursor:pointer; transition:transform .12s, background .12s; }
    .btn:hover { transform:translateY(-2px); background:#2ecc71; }
    .login-link { text-align:center; margin-top:14px; font-size:14px; color:#555; }
    .login-link a { color:#3498db; text-decoration:none; font-weight:600; }
    .error { color:#b00020; font-size:13px; margin-bottom:10px; display:none; }
    .success { color:#08660d; font-size:13px; margin-bottom:10px; display:none; }
  </style>
</head>
<body>
  <div class="container" role="main">
    <div class="logo">
      <img src="https://cdn-icons-png.flaticon.com/512/3202/3202926.png" alt="Logo GearShop">
      <strong>GEARSHOP</strong>
    </div>

    <h2>Crie sua conta</h2>
    <p class="lead">Preencha os dados abaixo para se cadastrar.</p>

    <!-- área de mensagens (injetável pelo Flask se quiser) -->
    <div id="message" aria-live="polite"></div>

    <form id="cadForm" action="{{ url_for('cadastro') }}" method="post" novalidate>
      <label for="cpf">CPF</label>
      <!-- máscara: 000.000.000-00, maxlength 14 -->
      <input id="cpf" name="cpf" type="text" placeholder="000.000.000-00" maxlength="14" required aria-describedby="cpfHelp" autocomplete="off">

      <label for="nome">Nome completo</label>
      <input id="nome" name="nome" type="text" placeholder="Seu nome completo" required>

      <label for="nascimento">Data de nascimento</label>
      <input id="nascimento" name="nascimento" type="date" required>

      <label for="senha">Senha</label>
      <input id="senha" name="senha" type="password" placeholder="Digite uma senha" required>

      <div class="password-info">
        <strong>Dica:</strong> sua senha deve ter no mínimo 8 caracteres, incluir letras e números.
      </div>

      <div id="error" class="error" role="alert"></div>
      <div id="success" class="success" role="status"></div>

      <button id="submitBtn" class="btn" type="submit">Cadastrar</button>
    </form>

    <div class="login-link">
      Já tem uma conta? <a href="{{ url_for('login') }}">Entrar</a>
    </div>
  </div>

<script>
/* Máscara simples para CPF (formato 000.000.000-00) */
function cpfMask(value){
  const digits = value.replace(/\D/g,'').slice(0,11);
  const part1 = digits.slice(0,3);
  const part2 = digits.slice(3,6);
  const part3 = digits.slice(6,9);
  const part4 = digits.slice(9,11);
  let out = part1;
  if(part2) out += '.' + part2;
  if(part3) out += '.' + part3;
  if(part4) out += '-' + part4;
  return out;
}
const cpfInput = document.getElementById('cpf');
cpfInput.addEventListener('input', (e) => {
  const pos = e.target.selectionStart;
  e.target.value = cpfMask(e.target.value);
  /* tentar manter cursor razoavelmente */
  if (pos) e.target.setSelectionRange(pos, pos);
});

/* Validação CPF frontend: apenas checa se tem 11 dígitos (server fará checksum) */
function onlyDigits(str){ return str.replace(/\D/g,''); }

const form = document.getElementById('cadForm');
const errorBox = document.getElementById('error');
const successBox = document.getElementById('success');
const submitBtn = document.getElementById('submitBtn');

form.addEventListener('submit', (ev) => {
  errorBox.style.display = 'none';
  successBox.style.display = 'none';

  const cpf = onlyDigits(cpfInput.value);
  if(cpf.length !== 11){
    ev.preventDefault();
    errorBox.textContent = 'CPF inválido: certifique-se de inserir 11 dígitos.';
    errorBox.style.display = 'block';
    cpfInput.focus();
    return false;
  }

  const senha = document.getElementById('senha').value || '';
  if(senha.length < 8){
    ev.preventDefault();
    errorBox.textContent = 'A senha deve ter pelo menos 8 caracteres.';
    errorBox.style.display = 'block';
    document.getElementById('senha').focus();
    return false;
  }

  // permitimos submissão; backend fará validação completa (checksum e duplicidade)
  return true;
});
</script>
</body>
</html>
